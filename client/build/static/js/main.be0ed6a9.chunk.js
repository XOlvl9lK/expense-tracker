(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,a){e.exports=a(36)},28:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),s=(a(28),a(15)),o=a(3),u=a(5),i=a.n(u),m=a(10),p=a(12),E=a(6),g=a(1),d=a(39),b=a(38),h=function(e){var t=e.loginForm,a=e.changeHandler,n=e.loading,c=e.loginHandler,l=e.keepLogged,s=e.checkboxHandler;return r.a.createElement("div",null,r.a.createElement("div",{className:"login"},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",value:t.email,onChange:function(e){return a(e,"login")}}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:t.password,onChange:function(e){return a(e,"login")}}),r.a.createElement("button",{id:"login-blur",onClick:c,disabled:n},"\u25ba")),r.a.createElement("div",{className:"check"},r.a.createElement("input",{type:"checkbox",checked:l,onChange:s}),r.a.createElement("p",null,"Keep me logged in")))},f=function(e){var t=e.registerForm,a=e.changeHandler,n=e.registerHandler,c=e.loading;return r.a.createElement("div",{className:"registration"},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",value:t.email,onChange:a}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:t.password,onChange:a}),r.a.createElement("input",{type:"password",placeholder:"Repeat Password",name:"confirmPassword",value:t.confirmPassword,onChange:a}),r.a.createElement("button",{id:"registration-blur",onClick:n,disabled:c},"\u25ba"))},v=function(){var e=Object(n.useState)(!1),t=Object(g.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(g.a)(c,2),s=l[0],o=l[1],u=Object(n.useCallback)(function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,c,l,s,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:"GET",n=u.length>2&&void 0!==u[2]?u[2]:null,c=u.length>3&&void 0!==u[3]?u[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),c["Content-type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:c});case 8:return l=e.sent,e.next=11,l.json();case 11:return s=e.sent,r(!1),e.abrupt("return",s);case 16:throw e.prev=16,e.t0=e.catch(4),r(!1),o(e.t0.message),e.t0;case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),[]),p=Object(n.useCallback)((function(){return o(null)}),[]);return{loading:a,error:s,request:u,setError:o,clearError:p}};function O(){}var j=Object(n.createContext)({token:null,userId:null,login:O,logout:O,isAuthenticated:!1}),x=function(e){var t=e.message;return r.a.createElement("div",{className:"error-wrap"},r.a.createElement("div",{className:"error"},r.a.createElement("h2",null,t)))},N=function(){var e=Object(n.useState)(!0),t=Object(g.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),o=s[0],u=s[1],O=Object(n.useState)({email:"",password:""}),N=Object(g.a)(O,2),k=N[0],w=N[1],C=Object(n.useState)({email:"",password:"",confirmPassword:""}),S=Object(g.a)(C,2),y=S[0],T=S[1],H=Object(n.useState)(!1),L=Object(g.a)(H,2),I=L[0],P=L[1],A=v(),B=A.loading,D=A.error,F=A.request,q=A.clearError,J=A.setError,z=Object(n.useContext)(j);Object(n.useEffect)((function(){D&&setTimeout((function(){q()}),3e3)}),[D,q]);var M=function(e,t){"login"===t?(u(!1),setTimeout((function(){return c(!0)}),200)):"registration"===t&&(c(!1),setTimeout((function(){return u(!0)}),200))},G=function(e,t){"login"===t?w(Object(E.a)(Object(E.a)({},k),{},Object(p.a)({},e.target.name,e.target.value))):T(Object(E.a)(Object(E.a)({},y),{},Object(p.a)({},e.target.name,e.target.value)))},R=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(E.a)({},y)).email=t.email.toLowerCase(),e.prev=2,e.next=5,F("/auth/register","POST",Object(E.a)({},t));case 5:a=e.sent,J(a.message),"User was created"===a.message&&M(0,"login"),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(E.a)({},k)).email=t.email.toLowerCase(),e.prev=2,e.next=5,F("/auth/login","POST",Object(E.a)(Object(E.a)({},t),{},{keepLogged:I}));case 5:a=e.sent,z.login(a.token,a.userId),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"auth-page"},r.a.createElement("h1",null,"Welcome to Expense Tracker "),r.a.createElement("hr",null),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:function(e){return M(0,"login")}},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),"Login"),r.a.createElement("button",{onClick:function(e){return M(0,"registration")}},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),"Registration")),r.a.createElement(d.a,null,a&&r.a.createElement(b.a,{classNames:"swipe-login",timeout:200},r.a.createElement(h,{loginForm:k,changeHandler:G,loading:B,loginHandler:W,keepLogged:I,checkboxHandler:function(){P(!I)}})),o&&r.a.createElement(b.a,{classNames:"swipe-registration",timeout:200},r.a.createElement(f,{registerForm:y,changeHandler:G,loading:B,registerHandler:R})),D&&r.a.createElement(b.a,{classNames:"pushup",timeout:500},r.a.createElement(x,{message:D}))))},k=function(e){var t=e.form,a=e.changeHandler,c=e.addHandler,l=e.warning,s=e.expenses,o=e.balance,u=e.expenseByMonth,i=Object(n.useState)(0),m=Object(g.a)(i,2),p=m[0],E=m[1],d=Object(n.useState)(0),b=Object(g.a)(d,2),h=b[0],f=b[1];Object(n.useEffect)((function(){if(E(0),f(0),u.length)for(var e=function(e){Number(u[e].amount)>=0?E((function(t){return t+Number(u[e].amount)})):Number(u[e].amount)<0&&f((function(t){return t+Number(u[e].amount)}))},t=0;t<u.length;t++)e(t)}),[u]);var v=[];if(s.length)for(var O=0;O<s.length&&!(O<0);O++)Number(s[O].amount)>0?v.push(r.a.createElement("p",{key:s[O].date},r.a.createElement("span",null,new Date(s[O].date).toLocaleDateString(),r.a.createElement("span",{className:"text-splitter"}),s[O].text),r.a.createElement("span",null,s[O].amount),r.a.createElement("span",{className:"positive"}))):v.push(r.a.createElement("p",{key:s[O].date},r.a.createElement("span",null,new Date(s[O].date).toLocaleDateString(),r.a.createElement("span",{className:"text-splitter"}),s[O].text),r.a.createElement("span",null,s[O].amount),r.a.createElement("span",{className:"negative"})));return r.a.createElement("div",{className:"main-page-wrap"},r.a.createElement("div",{className:"main-page"},r.a.createElement("h2",{className:"title"},"Expense Tracker"),r.a.createElement("hr",null),r.a.createElement("div",{className:"balance"},r.a.createElement("h3",null,"YOUR BALANCE"),r.a.createElement("p",null,"\u20bd",o)),r.a.createElement("div",{className:"month"},r.a.createElement("p",{className:"by-month"},"Statistics for the month"),r.a.createElement("div",{className:"income"},r.a.createElement("h3",null,"INCOME"),r.a.createElement("p",{className:""},"\u20bd",p)),r.a.createElement("div",{className:"expense"},r.a.createElement("h3",null,"EXPENSE"),r.a.createElement("p",null,"\u20bd",Math.abs(h)))),r.a.createElement("div",{className:"last-transactions"},r.a.createElement("h3",null,"Last Transactions"),r.a.createElement("hr",null),v.length?v:r.a.createElement("p",{className:"plug"},"No transactions for now")),r.a.createElement("div",{className:"new-transaction"},r.a.createElement("h3",null,"Add New Transaction"),r.a.createElement("hr",null),r.a.createElement("p",{className:"text"},"Text"),r.a.createElement("input",{type:"text",placeholder:"Enter text...",name:"text",value:t.text,onChange:a,autoComplete:"off"}),r.a.createElement("p",{className:"amount"},"Amount"),r.a.createElement("p",null,"(negative - expense, positive - income)"),r.a.createElement("input",{type:"text",placeholder:"Amount...",name:"amount",value:t.amount,onChange:a,autoComplete:"off"}),l&&r.a.createElement("p",{className:"warning"},l),r.a.createElement("button",{onClick:c},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),"Add Transaction"))))},w=function(){return r.a.createElement("div",{className:"loading"})},C=function(){var e=Object(n.useContext)(j),t=e.token,a=e.logout,c=Object(n.useState)({text:"",amount:""}),l=Object(g.a)(c,2),s=l[0],u=l[1],d=Object(n.useState)([]),b=Object(g.a)(d,2),h=b[0],f=b[1],O=Object(n.useState)([]),x=Object(g.a)(O,2),N=x[0],C=x[1],S=Object(n.useState)(0),y=Object(g.a)(S,2),T=y[0],H=y[1],L=Object(n.useState)(""),I=Object(g.a)(L,2),P=I[0],A=I[1],B=v(),D=B.request,F=B.loading,q=Object(o.f)(),J=Object(n.useCallback)(Object(m.a)(i.a.mark((function e(){var n,r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("/expenses","GET",null,{Authorization:"Bearer ".concat(t)});case 2:if(n=e.sent,r=n.expenses,c=n.balance,l=n.monthExpenses,"No authorization"!==n.message){e.next=11;break}return a(),q.push("/"),e.abrupt("return");case 11:C(l),f(r),H(c);case 14:case"end":return e.stop()}}),e)}))),[t,D,a,q]);Object(n.useEffect)((function(){J()}),[J]);var z=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P&&A(""),s.text.length<30&&!isNaN(Number(s.amount))&&s.amount&&s.text){e.next=3;break}return e.abrupt("return",A("Incorrect input"));case 3:return e.prev=3,e.next=6,D("/expenses/add","POST",Object(E.a)({},s),{Authorization:"Bearer ".concat(t)});case 6:u({text:"",amount:""}),J(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();return F?r.a.createElement(w,null):r.a.createElement(r.a.Fragment,null,!F&&r.a.createElement(k,{warning:P,form:s,changeHandler:function(e){u(Object(E.a)(Object(E.a)({},s),{},Object(p.a)({},e.target.name,e.target.value)))},addHandler:z,expenses:h,balance:T,expenseByMonth:N}))},S=function(e){var t=e.expenses,a=Object(n.useState)(0),c=Object(g.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(0),u=Object(g.a)(o,2),i=u[0],m=u[1],p=[];if(t.length)for(var E=l;E<l+8&&!(E>=t.length);E++)Number(t[E].amount>=0)?p.push(r.a.createElement("p",{key:t[E].date},r.a.createElement("span",null,new Date(t[E].date).toLocaleDateString(),r.a.createElement("span",{className:"text-splitter"}),t[E].text),r.a.createElement("span",null,t[E].amount),r.a.createElement("span",{className:"positive"}))):p.push(r.a.createElement("p",{key:t[E].date},r.a.createElement("span",null,new Date(t[E].date).toLocaleDateString(),r.a.createElement("span",{className:"text-splitter"}),t[E].text),r.a.createElement("span",null,t[E].amount),r.a.createElement("span",{className:"negative"})));var d=function(e,a){"left"===a&&0!==i?(m(i-1),s(l-8)):"right"===a&&l<t.length-8&&(m(i+1),s(l+8))};return r.a.createElement("div",{className:"history-wrap"},r.a.createElement("h2",{className:"title"},"History"),r.a.createElement("div",{className:"history"},t.length?p:r.a.createElement("p",{className:"plug"},"No transactions for now")),t.length>8?r.a.createElement("div",{className:"navigation"},r.a.createElement("span",{className:"arrow-left",onClick:function(e){return d(0,"left")}},"\xab"),r.a.createElement("span",null,i+1),r.a.createElement("span",{className:"arrow-right",onClick:function(e){return d(0,"right")}},"\xbb")):null)},y=function(){var e=Object(n.useContext)(j).token,t=Object(n.useState)([]),a=Object(g.a)(t,2),c=a[0],l=a[1],s=v(),o=s.loading,u=s.request,p=Object(n.useCallback)(Object(m.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u("/expenses/history","GET",null,{Authorization:"Bearer ".concat(e)});case 3:a=t.sent,n=a.expenses,l(n),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])}))),[e,u]);return Object(n.useEffect)((function(){p()}),[p]),o?r.a.createElement(w,null):r.a.createElement(r.a.Fragment,null,!o&&r.a.createElement(S,{expenses:c}))},T=function(){var e=Object(n.useContext)(j).logout,t=Object(o.f)(),a=function(e,a){document.querySelector(".active").classList.toggle("active"),e.target.classList.toggle("active"),"/main"===a&&t.push(a),"/history"===a&&t.push(a)};return r.a.createElement("div",{className:"navbar container"},r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(e){return a(e,"/main")},className:"active"},"Tracker"),r.a.createElement("li",{onClick:function(e){return a(e,"/history")}},"History"),r.a.createElement("li",{onClick:function(){e(),t.push("/")}},r.a.createElement("i",{className:"fa fa-sign-out","aria-hidden":"true"}))))};var H=function(){var e=function(){var e=Object(n.useState)(null),t=Object(g.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(g.a)(c,2),s=l[0],o=l[1],u=Object(n.useState)(null),i=Object(g.a)(u,2),m=i[0],p=i[1],E=Object(n.useCallback)((function(e,t){r(e),p(t),localStorage.setItem("expenseTracker",JSON.stringify({userId:t,token:e}))}),[]),d=Object(n.useCallback)((function(){r(null),p(null),localStorage.removeItem("expenseTracker")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("expenseTracker"));e&&e.token&&E(e.token,e.userId),o(!0)}),[E]),{login:E,logout:d,token:a,userId:m,ready:s}}(),t=e.token,a=e.login,c=e.logout,l=e.userId,u=!!t,i=function(e){return e?r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/main",component:C}),r.a.createElement(o.a,{path:"/history",component:y}),r.a.createElement(o.a,{path:"*",component:C})):r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:N}),r.a.createElement(o.a,{path:"*",component:N}))}(u);return r.a.createElement(j.Provider,{value:{token:t,login:a,logout:c,userId:l}},r.a.createElement(s.a,null,r.a.createElement("div",{className:"container"},i,u&&r.a.createElement(T,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(35);l.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.be0ed6a9.chunk.js.map